/*
 * This source file was generated by the Gradle 'init' task
 */
package uielements;


import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;


/**
 * คลาส LoginUI ใช้สำหรับสร้างหน้าจอล็อกอินของระบบ
 */
public class LoginUI {
    //private Stage primaryStage;
    /**
     * คอนสตรักเตอร์สำหรับสร้างหน้า Login
     * 
     * @param primaryStage หน้าหลัก
     */
    public LoginUI(Stage primaryStage){
       //this.primaryStage = primaryStage;


        // สร้าง Container ไว้ใส่ UI 
        VBox root = new VBox(10);
        root.setStyle("-fx-padding: 20;");

        /**
         * ข้อความ กรุณาล็อคอิน
         */
        Label loginLabel = new Label("กรุณาล็อคอิน");

        /**
         * ข้อความ UserName
         */
        Label nameLabel = new Label("UserName");

        /**
         * ใส่ข้อความ ชื่อบัญชีที่ลงทะเทียนไว้
         */
        TextField usernameField = new TextField("");

        /**
         * ข้อความ PassWord
         */
        Label passwordLabel = new Label("PassWord");

        /**
         * ใส่ข้อความ รหัสที่ลงทะเบียนไว้
         */
        TextField passwordField = new TextField("");
        
        /**
         * ปุ่ม ล็อคอิน
         */
        Button loginButton = new Button("ปุ่ม (Button): ล็อคอิน");
        

        /**
         * ปุ่ม สร้างรหัส
         */
        Button creatAccountsButton = new Button("ปุ่ม (Button): สร้างรหัส");

        /**
         * ข้อความ ใช้เเสดงการเตือน
         */
        Label messageLabel = new Label();

        /**
         * สร้างไอดีไว้ สำหรับทำการทดสอบ
         */
        usernameField.setId("usernameField");
        passwordField.setId("passwordField");
        loginButton.setId("loginButton");
        messageLabel.setId("messageLabel");
        creatAccountsButton.setId("creatAccountsButton");


       /**
        * ปุ่มสร้างรหัส การทำงาน เปิดไปหน้าสร้างบัญชี
        */
       creatAccountsButton.setOnAction(e -> new CreatAcountsUI(primaryStage));
       

    

/**
 ปุ่มล็อคอิน กรอกข้อมูลเข้ามาถ้าตรงกับ ใน Database คืนUser
* เเละตรวจสอบผ่าน authenticate user != null ล็อคอินสำเร็จ
*
* ส่งคำเตือนเมื่อไม่มีข้อมูลในระบบ
*/

loginButton.setOnAction(e -> {
    User user = Database.authenticate(usernameField.getText(), passwordField.getText());
    if (user != null) new TypeofCar(primaryStage);
    else messageLabel.setText("Invalid credentials.");
});



        /**
         * เพิ่มองค์ประกอบลงใน vbox
         */
        root.getChildren().addAll(loginLabel,nameLabel,usernameField,passwordLabel,passwordField,loginButton,creatAccountsButton,  messageLabel);
        
        /**
         * ตั้งค่าขนาดของฉาก 
         */
        Scene scene = new Scene(root, 400, 600);
        primaryStage.setTitle("ล็อคอิน");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    
}

